---
permalink: sg6100/replace-controller-e4000-duplex.html 
sidebar: sidebar 
keywords:  
summary:  
---
= E4000ストレージコントローラの交換（SG6160）
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
E4000コントローラが適切に機能しない場合や障害が発生した場合は、交換が必要になることがあります。

.作業を開始する前に
* 交換するコントローラと同じパーツ番号の交換用コントローラを用意しておきます。
* コントローラに接続する各ケーブルを識別するためのラベルを用意しておきます。
* ESD リストバンドを装着するか、静電気防止処置を施しておきます。
* No.1 プラスドライバを用意しておきます。
* データセンター内のコントローラを交換するストレージアプライアンスの物理的な場所を確認しておきます。



NOTE: StorageGRID アプライアンスのコントローラを交換する際は、Eシリーズの手順書を参考にしないでください。手順が異なります。

.このタスクについて
コントローラに障害が発生したかどうかは、次の 2 つの方法で確認できます。

* Grid Managerのアラートにストレージコントローラの障害が示され、SANtricity System ManagerのGrid ManagerまたはRecovery Guruからコントローラの交換を指示されます。
* コントローラの黄色の警告 LED が点灯して、コントローラに障害が発生したことが通知されます。
+

NOTE: シェルフ内の両方のコントローラの警告 LED が点灯している場合は、テクニカルサポートに連絡してください。



アプライアンスにストレージコントローラが2台搭載されている場合は、次の条件を満たしていれば、アプライアンスの電源がオンで読み取り/書き込み処理が行われている間に片方のコントローラを交換できます。

* シェルフのもう一方のコントローラのステータスが「最適」である。
* SANtricity System Manager の Recovery Guru の詳細領域の「 * 削除してもよろしいですか？」というメッセージが表示され、このコンポーネントを削除しても安全であることを示します。



NOTE: 可能な場合は、この交換用手順 のアプライアンスをメンテナンスモードにして、予期しないエラーや障害が発生した場合の影響を最小限にしてください。


NOTE: シェルフの2台目のコントローラのステータスが「最適」でない場合や、Recovery Guruにコントローラを削除しないよう記載されている場合は、テクニカルサポートにお問い合わせください。



== 手順1：交換用コントローラを準備する

交換用E4000コントローラを準備します。

.手順
. 新しいコントローラを開封し、静電気防止処置を施した平らな場所に置きます。
+
梱包材は、障害が発生したコントローラを発送するときのために保管しておいてください。

. 交換用コントローラの背面にある MAC アドレスと FRU パーツ番号のラベルを確認します。




== 手順2：コントローラをオフラインにする

障害が発生したコントローラを取り外してオフラインにする準備をします。これらの手順は、SANtricityシステムマネージャを使用して実行できます。

.手順
. 障害が発生したコントローラの交換パーツ番号が交換用コントローラの FRU パーツ番号と同じであることを確認します。
+
コントローラに障害が発生しているため交換が必要な場合は、 Recovery Guru の詳細領域に交換パーツ番号が表示されます。この番号を手動で確認する必要がある場合は、コントローラの * Base * タブを参照してください。

+

CAUTION: *データアクセスが失われる可能性があります&#8212;* 2つのパーツ番号が同じでない場合は、この手順 を使用しないでください。

. 構成データベースをバックアップします。
+
コントローラを取り外すときに問題が発生した場合は、保存したファイルを使用して構成をリストアできます。RAID 構成データベースの現在の状態が保存されます。これには、コントローラ上のボリュームグループとディスクプールのすべてのデータが含まれます。

+
.. *サポート›サポートセンター›診断*を選択します。
.. [ 構成データの収集 *] を選択します。
.. [*Collect*]( 収集 ) をクリックします
+
ブラウザの Downloads フォルダに、「 * configurationdata-<ArrayName>-<dateTime >.7z * 」という名前でファイルが保存されます。



. アプライアンスのサポートデータを収集します。
+

NOTE: コンポーネントを交換する前後にサポートデータを収集することで、交換しても問題が解決しない場合に、テクニカルサポートにすべてのログを送信できます。

+
コントローラの取り外し時に問題が発生した場合は、保存したファイルを使用して問題のトラブルシューティングを行うことができます。ストレージアレイに関するインベントリ、ステータス、およびパフォーマンスデータが 1 つのファイルに保存されます。

+
.. *サポート›サポートセンター›診断*を選択します。
.. 「サポートデータの収集」を選択します。
.. [*Collect*]( 収集 ) をクリックします


. 交換するコントローラをオフラインにします。




== 手順3：コントローラキャニスターを取り外す

コントローラキャニスターを取り外します。

.手順
. ESD リストバンドを装着するか、静電気防止処置を施します。
. コントローラキャニスターに接続された各ケーブルにラベルを付けます。
. コントローラキャニスターからすべてのケーブルを外します。
+

CAUTION: パフォーマンスの低下を防ぐために、ケーブルをねじったり、折り曲げたり、はさんだり、踏みつけたりしないでください。

. カムハンドルのラッチを外れるまで押し、カムハンドルをいっぱいまで開いてコントローラキャニスターをミッドプレーンから外し、両手でコントローラキャニスターをシャーシから引き出します。
. 取り外し可能なカバーを上にして、静電気防止処置を施した平らな場所にコントローラを置きます。
. コントローラキャニスターの側面にある青いボタンを押してカバーを開き、カバーを上に回転させてコントローラキャニスターから取り外します。




== 手順4：交換用コントローラに転送するパーツを特定する

交換用コントローラにはパーツがあらかじめ取り付けられている場合があります。交換用コントローラキャニスターに移す必要があるパーツを特定します。

. 取り外し可能なカバーを上にして、交換用コントローラを静電気防止処置を施した平らな場所に置きます。
. コントローラキャニスターの側面にある青いボタンを押してカバーを開き、カバーを上に回転させてコントローラキャニスターから取り外します。
. 交換用コントローラにバッテリ/ DIMMが搭載されているかどうかを確認します。表示される場合は、コントローラのカバーを再度取り付け、に進みます。 <<step8_replace_controller,手順8：コントローラを交換する>>。それ以外の場合：
+
** 交換用コントローラにバッテリまたはDIMMが搭載されていない場合は、に進みます。 <<step5_remove_battery,手順5：バッテリを取り外す>>。
** 交換用コントローラにバッテリが搭載されていてDIMMが搭載されていない場合は、に進みます。 <<step6_remove_dimm,手順6：DIMMを移動する>>。






== 手順5：バッテリを取り外す

障害のあるコントローラからバッテリを取り外し、必要に応じて交換用コントローラに取り付けます。

.手順
. コントローラキャニスターからバッテリを取り外します。
+
.. コントローラキャニスターの側面にある青いボタンを押します。
.. 保持ブラケットからバッテリを上にスライドさせ、持ち上げてコントローラキャニスターから取り出します。
.. バッテリプラグ前面のクリップを押してプラグをソケットから外し、バッテリケーブルをソケットから抜きます。
+
image::../media/drw_E4000_replace_nvbattery_IEOPS-862.png[NVMEMバッテリを取り外します。]

+
|===


 a| 
image::../media/legend_icon_01.png[コールアウトリファレンス1]
| バッテリリリースタブ 


 a| 
image::../media/legend_icon_02.png[コールアウトリファレンス2]
| バッテリ電源コネクタ 
|===


. バッテリを交換用コントローラキャニスターに移動して取り付けます。
+
.. バッテリを金属板の側壁の保持ブラケットに合わせますが、接続しないでください。残りのコンポーネントを交換用コントローラキャニスターに移動したら、プラグを差し込みます。


. 交換用コントローラにDIMMが事前に取り付けられている場合は、に進みます。 <<step7_install_battery,手順7：バッテリを取り付ける>>。それ以外の場合は、次の手順に進みます。




== 手順6：DIMMを移動する

障害のあるコントローラキャニスターからDIMMを取り外し、交換用コントローラキャニスターに取り付けます。

.手順
. コントローラキャニスターでDIMMの場所を確認します。
+

NOTE: DIMMを交換用コントローラキャニスターの同じ場所に正しい向きで挿入できるように、ソケット内のDIMMの場所をメモします。
障害のあるコントローラキャニスターからDIMMを取り外します。

+
.. DIMMの両側にある2つのツメをゆっくり押し開いて、DIMMをスロットから外します。
+
DIMMが少し上に回転します。

.. DIMMを所定の位置まで回転させ、ソケットから引き出します。
+

NOTE: DIMM 回路基板のコンポーネントに力が加わらないように、 DIMM の両端を慎重に持ちます。

+
image::../media/drw_E4000_replace_dimms_IEOPS-865.png[DIMMを取り外します。]

+
|===


 a| 
image::../media/legend_icon_01.png[コールアウトリファレンス1]
| DIMM のツメ 


 a| 
image::../media/legend_icon_02.png[コールアウトリファレンス2]
| DIMM 
|===


. 交換用コントローラキャニスターにバッテリが接続されていないことを確認します。
. DIMMは、障害コントローラと同じ場所に交換用コントローラに取り付けます。
+
.. DIMM の両端のノッチにツメがかかるまで、 DIMM の上部を慎重にしっかり押し込みます。
+
DIMM のスロットへの挿入にはある程度の力が必要です。簡単に挿入できない場合は、 DIMM をスロットに正しく合わせてから再度挿入してください。

+

NOTE: DIMM がスロットにまっすぐ差し込まれていることを目で確認してください。



. 他のDIMMについても同じ手順を繰り返します。
. 交換用コントローラにバッテリが装着されている場合は、に進みます。 <<step8_replace_controller,手順8：コントローラを交換する>>。それ以外の場合は、次の手順に進みます。




== 手順7：バッテリを取り付ける

交換用コントローラキャニスターにバッテリを取り付けます。

.手順
. バッテリプラグをコントローラキャニスターのソケットに再度接続します。
+
プラグがマザーボードのバッテリソケットに固定されていることを確認します。

. バッテリを金属板の側壁の保持ブラケットに合わせます。
. バッテリラッチがカチッという音がして側壁の開口部に収まるまで、バッテリパックを下にスライドさせます。
. コントローラキャニスターのカバーを再度取り付け、所定の位置にロックします。




== 手順8：コントローラを交換する

交換用コントローラを設置し、ノードがグリッドに再参加したことを確認します。

.手順
. 交換用コントローラをアプライアンスに取り付けます。
+
.. 取り外し可能なカバーが下になるようにコントローラを裏返します。
.. カムハンドルを開いた状態でコントローラをスライドし、アプライアンスに最後まで挿入します。
.. カムハンドルを左側に動かして、コントローラを所定の位置にロックします。
.. ケーブルを交換します。
.. 元のコントローラの IP アドレスが DHCP を使用して取得したアドレスである場合は、交換用コントローラの背面のラベルに記載された MAC アドレスを確認します。取り外したコントローラの DNS / ネットワークおよび IP アドレスを交換用コントローラの MAC アドレスと関連付けるよう、ネットワーク管理者に依頼します。
+

NOTE: 元のコントローラの IP アドレスが DHCP を使用して取得したアドレスでなければ、取り外したコントローラの IP アドレスが新しいコントローラで使用されます。



. SANtricity System Manager を使用して、コントローラをオンラインにします。
+
.. 「 * ハードウェア * 」を選択します。
.. 図にドライブが表示された場合は、*[コントローラとコンポーネント]*を選択します。
.. オンラインに切り替えるコントローラを選択します。
.. コンテキストメニューから * オンラインに配置 * を選択し、操作を確定します。


. コントローラのブート時に、コントローラの LED を確認します。
+
** コントローラの黄色の警告 LED が点灯したあと、エラーがなければ消灯します。
** ホストリンク LED は、ホストインターフェイスに応じて、点灯、点滅、消灯のいずれかになります。


. コントローラがオンラインに戻ったら、ステータスが「最適」になっていることを確認し、コントローラシェルフの警告 LED を確認します。
+
ステータスが「最適」でない場合やいずれかの警告 LED が点灯している場合は、すべてのケーブルが正しく装着され、コントローラキャニスターが正しく取り付けられていることを確認します。必要に応じて、コントローラキャニスターを取り外して再度取り付けます。

+

NOTE: 問題が解決しない場合は、テクニカルサポートにお問い合わせください。

. 必要に応じて、 SANtricity システムマネージャを使用して、すべてのボリュームを再配置して優先所有者に戻します。
+
.. [ストレージ]>[ボリューム]*を選択します。
.. [その他]>[ボリュームの再配置]*を選択します。


. SANtricity システムマネージャを使用してストレージアレイのサポートデータを収集します。
+
.. *サポート›サポートセンター›診断*を選択します。
.. 「サポートデータの収集」を選択します。
.. [*Collect*]( 収集 ) をクリックします
+
ブラウザの Downloads フォルダに、「 * support-data.7z * 」という名前でファイルが保存されます。



. この手順の実行中にアプライアンスをメンテナンスモードにした場合は、メンテナンスモードを終了し、ノードがリブートしてグリッドに再参加するまで待ちます。このプロセスには最大20分かかることがあります。次に、Grid Managerで、[Nodes]ページでアプライアンスノードの通常のステータス（ノード名の左側にある緑のチェックマークアイコン）が表示されていることを確認しimage:../media/icon_alert_green_checkmark.png["緑のチェックマーク"]ます。これは、アクティブなアラートがなく、ノードがグリッドに接続されていることを示します。
+
image::../media/nodes_menu.png[アプライアンスノードがグリッドに再参加しました]



.次の手順
これでコントローラの交換は完了です。通常の運用を再開することができます。

部品の交換後、障害のある部品は、キットに付属する RMA 指示書に従ってネットアップに返却してください。を参照してください https://mysupport.netapp.com/site/info/rma["パーツの返品と交換"^] 詳細については、を参照してください。
