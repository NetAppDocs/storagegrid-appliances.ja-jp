---
permalink: sg6000/upgrading-drive-firmware-using-santricity-system-manager-offline.html 
sidebar: sidebar 
keywords: storagegrid, sg6000, storage node, storage appliance, upgrade, firmware, drive, disk, SANtricity System Manager, SANtricity 
summary: ドライブファームウェアをアップグレードして、最新の機能とバグ修正をすべて適用します。 
---
= オフライン方式を使用したSANtricity System Managerを使用したSG6000ドライブファームウェアのアップグレード
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SANtricity System Managerのオフライン方式を使用してアプライアンスのドライブのファームウェアをアップグレードし、最新の機能とバグ修正をすべて適用します。

.作業を開始する前に
* ストレージアプライアンスのステータスが「最適」であることを確認します。
* すべてのドライブのステータスが最適な状態である必要があります
* これで完了です link:../commonhardware/placing-appliance-into-maintenance-mode.html["StorageGRID アプライアンスをメンテナンスモードに切り替えました"]。
+

NOTE: アプライアンスがメンテナンスモードの間は、停止を伴うストレージ処理を安全に行うために、ストレージコントローラへのI/O（入出力）アクティビティが停止します。




CAUTION: 一度に複数のStorageGRID アプライアンスでドライブファームウェアをアップグレードしないでください。ご使用の導入モデルとILMポリシーによっては、原因 のデータを使用できなくなる可能性があります。

.このタスクについて
アプライアンスがメンテナンスモードのときに、ドライブが並行してアップグレードされます。プールまたはボリュームグループで冗長性がサポートされていない場合、またはデグレード状態の場合は、オフライン方式を使用してドライブファームウェアをアップグレードする必要があります。フラッシュ読み取りキャッシュに関連付けられたドライブ、またはデグレード状態のプールやボリュームグループにも、オフライン方式を使用する必要があります。オフライン方式では、アップグレード対象のドライブですべてのI/Oアクティビティが停止している間にのみファームウェアがアップグレードされます。I/Oアクティビティを停止するには、ノードをメンテナンスモードにします。

オフライン方式はオンライン方式よりも高速で、1台のアプライアンス内の多数のドライブをアップグレードする必要がある場合は、はるかに高速です。ただし、ノードを停止する必要があるため、メンテナンス時間のスケジュール設定や進捗状況の監視が必要になる場合があります。運用手順とアップグレードが必要なドライブの数に最も適した方法を選択します。


CAUTION: ドライブにはSSDとHDDの2種類があります。SSDのファームウェアをアップグレードするには、オフライン方式を使用する必要があります（SG6060のSSDドライブなど）。オンライン方式またはオフライン方式を使用して、HDDのファームウェアをアップグレードできます。

.手順
. アプライアンスがに接続されていることを確認します link:../commonhardware/placing-appliance-into-maintenance-mode.html["メンテナンスモード"]。
+

NOTE: キャッシュグループに含まれているSSDドライブのファームウェアをアップグレードする場合は、アップグレードの実行中にキャッシュされたボリュームにI/Oが送信されないようにする必要があります。アプライアンスがメンテナンスモードの場合、アップグレードの実行中はボリュームにI/Oは送信されません。

. 次のいずれかの方法で SANtricity System Manager にアクセスします。
+
** StorageGRID アプライアンス・インストーラを使用して、 * アドバンスト * > * SANtricity システム・マネージャ * を選択します
** グリッドマネージャを使用して、* nodes *>*_ Storage Node_*>* SANtricity System Manager *を選択します
** SANtricity System ManagerでストレージコントローラのIPにアクセスします。
+
`*https://_Storage_Controller_IP_*`



. 必要に応じて、 SANtricity System Manager 管理者のユーザ名とパスワードを入力します。
. ストレージアプライアンスに現在インストールされているドライブファームウェアのバージョンを確認します。
+
.. SANtricity システムマネージャで、 * support * > * Upgrade Center * を選択します。
.. ドライブファームウェアのアップグレードで、 * アップグレードの開始 * を選択します。
+
[ドライブファームウェアのアップグレード]ページには、現在インストールされているドライブファームウェアファイルが表示されます。

.. 現在のドライブファームウェア列に表示されているドライブファームウェアのリビジョンとドライブ ID をメモします。
+
image::../media/storagegrid_update_drive_firmware.png[ドライブファームウェアをアップグレードします]

+
次の例では、

+
*** ドライブファームウェアのリビジョンは * MS02 * です。
*** ドライブ識別子は *KPM51VUG800G* です。


.. Associated Drives 列で「 * View drives 」を選択して、ストレージアプライアンス内のドライブがどこに取り付けられているかを表示します。
.. ドライブファームウェアのアップグレードウィンドウを閉じます。


. 使用可能なドライブファームウェアのアップグレードをダウンロードして準備します。
+
.. ドライブファームウェアのアップグレードで、 * ネットアップサポート * を選択します。
.. NetApp Support Site で、*[ダウンロード]*タブを選択し、*[ Eシリーズディスクドライブファームウェア]*を選択します。
+
E-Series Disk Firmware ページが表示されます。

.. ストレージアプライアンスにインストールされているドライブ識別子 * をそれぞれ検索し、各ドライブ識別子に最新のファームウェアリビジョンが適用されていることを確認します。
+
*** ファームウェアリビジョンがリンクでない場合、このドライブ識別子には最新のファームウェアリビジョンが含まれます。
*** ドライブ識別子が記載されたドライブのパーツ番号が 1 つ以上であれば、それらのドライブでファームウェアのアップグレードを実行できます。任意のリンクを選択してファームウェアファイルをダウンロードできます。
+
image::../media/storagegrid_drive_firmware_download.png[E シリーズディスクファームウェアのページです]



.. 新しいファームウェアリビジョンがリストされている場合は、ファームウェアリビジョンのリンクを選択します（ダウンロード）列をクリックしてをダウンロードします `.zip` ファームウェアファイルを含むアーカイブ。
.. サポートサイトからダウンロードしたドライブファームウェアのアーカイブファイルを展開（解凍）します。


. ドライブファームウェアのアップグレードをインストールします。
+
.. SANtricity システムマネージャのドライブファームウェアアップグレードで、 * アップグレードの開始 * を選択します。
.. [* Browse] を選択し、サポートサイトからダウンロードした新しいドライブファームウェアファイルを選択します。
+
ドライブファームウェアファイルの名前は次のようになります。 `D_HUC101212CSS600_30602291_MS01_2800_0002.dlp`。

+
ドライブファームウェアファイルは一度に 1 つずつ、最大 4 つまで選択できます。同じドライブに複数のドライブファームウェアファイルが対応している場合は、ファイル競合エラーが発生します。アップグレードに使用するドライブファームウェアファイルを決定し、それ以外のファイルは削除します。

.. 「 * 次へ * 」を選択します。
+
* ドライブの選択 * には、選択したファームウェアファイルでアップグレードできるドライブがリストされています。

+
対応しているドライブのみが表示されます。

+
ドライブに対して選択したファームウェアが* Proposed Firmware *列に表示されます。このファームウェアを変更する必要がある場合は、 * 戻る * を選択します。

.. [すべてのドライブをオフライン（並行処理）にアップグレード]*を選択します。ドライブを使用するすべてのボリュームですべてのI/Oアクティビティが停止している間にのみ、ファームウェアのダウンロードが可能なドライブをアップグレードします。
+

CAUTION: この方法を使用する前に、アプライアンスをメンテナンスモードにする必要があります。ドライブファームウェアをアップグレードするには、*オフライン*方式を使用する必要があります。

+

CAUTION: オフライン（並行）アップグレードを使用する場合は、アプライアンスがメンテナンスモードであることが確実でないかぎり、次の手順に進まないでください。オフラインのドライブファームウェア更新を開始する前にアプライアンスをメンテナンスモードにしないと、原因 のデータが失われる可能性があります。

.. テーブルの最初の列で、アップグレードするドライブを選択します。
+
ベストプラクティスとして、同じモデルのドライブをすべて同じファームウェアリビジョンにアップグレードすることを推奨します。

.. [開始]*を選択し、アップグレードを確定します。
+
アップグレードを停止する必要がある場合は、 * 停止 * を選択します。実行中のファームウェアのダウンロードは完了します。開始されていないファームウェアのダウンロードはキャンセルされます。

+

CAUTION: ドライブファームウェアのアップグレードを停止すると、データが失われたり、ドライブを使用できなくなったりする可能性があります。

.. （オプション）アップグレードされた内容のリストを表示するには、 * ログを保存 * を選択します。
+
ログファイルは、ブラウザのダウンロードフォルダにという名前で保存されます `latest-upgrade-log-timestamp.txt`。

+
link:troubleshoot-upgrading-drive-firmware-using-santricity-system-manager.html["必要に応じて、ドライバファームウェアのアップグレードエラーのトラブルシューティングを行う"]。



. 手順が正常に完了したら、ノードをメンテナンスモードにして、追加のメンテナンス手順を実行します。完了したら、または障害が発生してやり直したい場合は、StorageGRID アプライアンスインストーラで*[アドバンスト]*>*[コントローラのリブート]*を選択します。次に、次のいずれかのオプションを選択します。
+
** * StorageGRID *で再起動します。
** *メンテナンスモードで再起動します*。コントローラをリブートし、ノードをメンテナンスモードのままにします。手順 の実行中に障害が発生し、最初からやり直す場合は、このオプションを選択します。ノードのリブートが完了したら、障害が発生した手順 の該当する手順から再起動します。
+
アプライアンスがリブートしてグリッドに再参加するまでに最大 20 分かかることがあります。リブートが完了し、ノードが再びグリッドに参加したことを確認するには、 Grid Manager に戻ります。[Nodes]ページに正常なステータス（緑のチェックマークアイコン）が表示されます image:../media/icon_alert_green_checkmark.png["緑のチェックマーク"] （ノード名の左側）に表示されます。これは、アクティブなアラートがなく、ノードがグリッドに接続されていることを示します。

+
image::../media/nodes_menu.png[アプライアンスノードがグリッドに再参加しました]




